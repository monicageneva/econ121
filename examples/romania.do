// this do file analyzes data from romanian schools. the data include// students who live in towns with two high schools. high school admissions// are based on an entry exam. we will use the admissions cutoff to// the town's better high school in a fuzzy regression discontinuity design.use "https://github.com/tvogl/econ121/raw/main/data/romania_schools.dta",clear// variables in the datasetd// summarize distance to the town-specific cutoffsum distance// graph of first stage relationship --> effect of being above town's cutoff on going to the better schooltwoway (lpoly better distance if distance<0,degree(1) bw(0.2)) ///       (lpoly better distance if distance>=0,degree(1) bw(0.2)),legend(off)// graph of reduced form relationship --> effect of being above town's cutoff on exit exam percentiletwoway (lpoly ptile distance if distance<0,degree(1) bw(0.2)) ///       (lpoly ptile distance if distance>=0,degree(1) bw(0.2)),legend(off)	   // first stage local linear regression with rectangular kernel and bw = 0.05gen above = (distance>=0)gen aboveXdistance = above*distancereg better above distance aboveXdistance if abs(distance)<=0.2,r// reduced form local linear regression with rectangular kernel and bw = 0.05reg ptile above distance aboveXdistance if abs(distance)<=0.2,r// ratio of reduced form to first stage --> effect of going to the town's better school on exit exam percentiledi 3.95468/.6369932// estimate by two stage least squaresivregress 2sls ptile (better = above) distance aboveXdistance if abs(distance)<=0.2,r